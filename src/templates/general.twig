{% extends 'pragmatic-cookies/_layout' %}
{% import "_includes/forms" as forms %}

{% set title = 'General'|t('pragmatic-cookies') %}
{% set selectedTab = 'general' %}
{% set _siteHandle = craft.app.request.getQueryParam('site') %}
{% set _siteParam = _siteHandle ? { site: _siteHandle } : {} %}

{% set crumbs = [
  { label: 'Cookies'|t('pragmatic-cookies'), url: url('pragmatic-cookies', _siteParam) },
  { label: 'General'|t('pragmatic-cookies'), url: url('pragmatic-cookies/general', _siteParam) },
] %}

{% block content %}
  <form method="post" accept-charset="UTF-8">
    {{ csrfInput() }}
    {{ actionInput('pragmatic-cookies/default/save-general') }}
    {{ redirectInput('pragmatic-cookies/general', _siteParam) }}

    {{ forms.textField({
      label: 'Popup Title'|t('pragmatic-cookies'),
      id: 'popupTitle',
      name: 'popupTitle',
      value: settings.popupTitle,
      required: true,
      instructions: 'The title displayed at the top of the cookie consent popup.'|t('pragmatic-cookies')
    }) }}

    {{ forms.textareaField({
      label: 'Popup Description'|t('pragmatic-cookies'),
      id: 'popupDescription',
      name: 'popupDescription',
      value: settings.popupDescription,
      rows: 3,
      instructions: 'The description text shown in the cookie consent popup.'|t('pragmatic-cookies')
    }) }}

    {{ forms.textField({
      label: 'Accept All Button Label'|t('pragmatic-cookies'),
      id: 'acceptAllLabel',
      name: 'acceptAllLabel',
      value: settings.acceptAllLabel,
      required: true,
    }) }}

    {{ forms.textField({
      label: 'Reject All Button Label'|t('pragmatic-cookies'),
      id: 'rejectAllLabel',
      name: 'rejectAllLabel',
      value: settings.rejectAllLabel,
      required: true,
    }) }}

    {{ forms.textField({
      label: 'Save Preferences Button Label'|t('pragmatic-cookies'),
      id: 'savePreferencesLabel',
      name: 'savePreferencesLabel',
      value: settings.savePreferencesLabel,
      required: true,
    }) }}

    {{ forms.textField({
      label: 'Cookie Policy URL'|t('pragmatic-cookies'),
      id: 'cookiePolicyUrl',
      name: 'cookiePolicyUrl',
      value: settings.cookiePolicyUrl,
      instructions: 'Link to your cookie/privacy policy page. Leave empty to hide the link.'|t('pragmatic-cookies')
    }) }}

    <div class="btngroup">
      <button type="submit" class="btn submit">{{ 'Save'|t('pragmatic-cookies') }}</button>
    </div>
  </form>
{% endblock %}
